!function n(s,a,f){function h(e,t){if(!a[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(c)return c(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var r=a[e]={exports:{}};s[e][0].call(r.exports,function(t){return h(s[e][1][t]||t)},r,r.exports,n,s,a,f)}return a[e].exports}for(var c="function"==typeof require&&require,t=0;t<f.length;t++)h(f[t]);return h}({1:[function(t,e,i){"use strict";var o=t("./_optional")("peako/default-to",["peako","defaultTo"]),r=t("./math/Vector2D");function n(t,e){t||(t={}),this.xSpeed=o(t.xSpeed,1),this.ySpeed=o(t.ySpeed,1),this.zoomInSpeed=o(t.zoomInSpeed,1),this.zoomOutSpeed=o(t.zoomOutSpeed,1),this.zoom=o(t.zoom,1),this.minZoom=o(t.minZoom,1),this.maxZoom=o(t.maxZoom,1),this.useLinearZoomIn=o(t.useLinearZoomIn,!0),this.useLinearZoomOut=o(t.useLinearZoomOut,!0),this.offset=t.offset,e?(this.offset||(this.offset=new r(.5*e.w,.5*e.h)),this.renderer=e):this.offset||(this.offset=new r),this.position=[0,0,0,0,0,0]}n.prototype={update:function(){var t=this.position;return t[0]!==t[2]&&(t[0]+=(t[2]-t[0])*this.xSpeed),t[1]!==t[3]&&(t[1]+=(t[3]-t[1])*this.ySpeed),this},lookAt:function(t){var e=this.position,i=this.offset;return e[2]=i.x/this.zoom-(e[4]=t.x),e[3]=i.y/this.zoom-(e[5]=t.y),this},shouldLookAt:function(){return new r(this.position[4],this.position[5])},looksAt:function(){var t=(this.offset.x-this.position[0]*this.zoom)/this.zoom,e=(this.offset.y-this.position[1]*this.zoom)/this.zoom;return new r(t,e)},sees:function(t,e,i,o,r){var n=this.offset,s=this.looksAt();return r||(r=this.renderer),t+i>s.x-n.x/this.zoom&&t<s.x+(r.w-n.x)/this.zoom&&e+o>s.y-n.y/this.zoom&&e<s.y+(r.h-n.y)/this.zoom},zoomIn:function(){var t;this.zoom!==this.maxZoom&&(t=this.useLinearZoomIn?this.zoomInSpeed*this.zoom:this.zoomInSpeed,this.zoom=Math.min(this.zoom+t,this.maxZoom))},zoomOut:function(){var t;this.zoom!==this.minZoom&&(t=this.useLinearZoomOut?this.zoomOutSpeed*this.zoom:this.zoomOutSpeed,this.zoom=Math.max(this.zoom-t,this.minZoom))},constructor:n},e.exports=n},{"./_optional":17,"./math/Vector2D":32}],2:[function(t,e,i){"use strict";function o(t,e,i,o,r){this.image=t,this.x=e,this.y=i,this.w=o,this.h=r}o.prototype={get:function(){return this.image.get()},constructor:o},e.exports=o},{}],3:[function(t,e,i){"use strict";function h(t,e,i,o,r,n){}function c(t){return"inherit"===t||"initial"===t||"unset"===t}h.prototype={set:function(t,e,i,o,r,n){var s;if(t instanceof h?this.setFont(t):null==e&&(c(t)||("number"==typeof(s=t)||/^(?:smaller|xx-small|x-small|small|medium|large|x-large|xx-large|larger|(\d+|\d*\.\d+)(px|em|\u0025|cm|in|mm|pc|pt|rem)?)$/.test(s))?this.size=t:this.family=t),null==e)is_global(t)||is_font_size(t)?this.size=t:this.family=t;else if(void 0===i)this.size=t,this.family=e;else if(void 0===o)this[get_property_name(t,"style")]=t,this.size=e,this.family=i;else if(void 0===n){var a=get_property_name(t,"style"),f=get_property_name(e,"style"===a?"variant":"weight");a===f&&(f="style"===a?"variant":"weight"),this[a]=t,this[f]=e,this.size=i,this.family=o}else this.style=t,this.variant=e,this.weight=i,this.size=o,this.family=n},setFont:function(t){return this.style=t.style,this.variant=t.variant,this.weight=t.weight,this.size=t.size,this.lineHeight=t.lineHeight,this.family=t.family,this},constructor:h},e.exports=h},{}],4:[function(t,e,i){"use strict";var n=t("./CompoundedImage"),o=t("./report");function r(t){if(this.loaded=!1,this.x=0,this.y=0,"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)t.src?(t.complete?this._onload():o('new v6.Image: you should manually set the "loaded" property if you are using "new v6.Image( image )"'),this.url=t.src):this.url="",this.image=t;else{if("string"!=typeof t)throw TypeError("new v6.Image: first argument must be a string or a HTMLImageElement object");this.image=document.createElement("img"),this.url=t,this.load()}}r.prototype={_onload:function(t){t&&(this.image.onload=null),this.w=this.image.width,this.h=this.image.height,this.loaded=!0},load:function(t){return this.loaded||(this.image.onload=this._onload,this.image.src=this.url=this.url||t||""),this},get:function(){return this},constructor:r},r.stretch=function(t,e,i){var o=i/t.h*t.w;return o<e?i=e/t.w*t.h:e=o,new n(t.get(),t.x,t.y,e,i)},r.cut=function(t,e,i,o,r){if((e+=t.x)+o>t.x+t.w)throw Error("v6.Image.cut: cannot cut the image because the new image X or W is out of bounds");if((i+=t.y)+r>t.y+t.h)throw Error("v6.Image.cut: cannot cut the image because the new image Y or H is out of bounds");return new n(t.get(),e,i,o,r)},e.exports=r},{"./CompoundedImage":2,"./report":39}],5:[function(t,e,i){"use strict";var o=t("./_setDefaultDrawingSettings"),r=t("./_copyDrawingSettings"),n=t("./_getContextNameGL"),h=t("./_createPolygon"),c=t("./_polygons"),s=t("./_optional"),a=t("./CompoundedImage"),f=t("./constants"),u=t("./options"),l=t("./Image"),d=s("peako/get-element-w",["peako","prototype","width"]),m=s("peako/get-element-h",["peako","prototype","height"]),p=s("peako/base/base-for-in",["peako","forOwnRight"]),g=0;function y(t,e){var i={alpha:t.alpha};if(t.canvas?this.canvas=t.canvas:(this.canvas=document.createElement("canvas"),this.canvas.innerHTML="Unable to run the application."),t.append&&this.add(),e===f.MODE_2D)this.context=this.canvas.getContext("2d",i);else if(e===f.MODE_GL){if(!(e=n()))throw Error("Cannot get WebGL context. Try to use v6.constants.MODE_GL as the renderer mode or v6.Renderer2D instead of v6.RendererGL");this.context=this.canvas.getContext(e,i)}this.settings=t.settings,this.mode=e,this.index=g,this._stack=[],this._stackIndex=-1,this._vertices=[],o(this,this),"w"in t||"h"in t?this.resize(t.w,t.h):this.resizeTo(window),g+=1}y.prototype={add:function(t){return(t||document.body).appendChild(this.canvas),this},destroy:function(){return this.canvas.parentNode.removeChild(this.canvas),this},push:function(){return this._stack[++this._stackIndex]?r(this._stack[this._stackIndex],this):this._stack.push(o({},this)),this},pop:function(){return 0<=this._stackIndex?r(this,this._stack[this._stackIndex--]):o(this,this),this},resize:function(t,e){var i=this.canvas;i.style.width=t+"px",i.style.height=e+"px";var o=this.settings.scale;return i.width=this.w=Math.floor(t*o),i.height=this.h=Math.floor(e*o),this},resizeTo:function(e){var i,o;try{i=d(e),o=m(e)}catch(t){i=d.call([e]),o=m.call([e])}return this.resize(i,o)},rescale:function(){return this.resizeTo(this.canvas)},background:function(t,e,i,o){return t instanceof l||t instanceof a?this.backgroundImage(t):this.backgroundColor(t,e,i,o)},_polygon:function(t,e,i,o,r,n,s){var a=c[r],f=this.matrix;return a||(a=c[r]=h(r)),s&&(n*=Math.PI/180),f.save(),f.translate(t,e),f.rotate(n),this.vertices(a,.5*a.length,null,i,o),f.restore(),this},polygon:function(t,e,i,o,r){return o%1&&(o=.01*Math.floor(100*o)),void 0!==r?this._polygon(t,e,i,i,o,r,u.degrees):this._polygon(t,e,i,i,o,.5*-Math.PI),this},noStroke:function(){return this._doStroke=!1,this},noFill:function(){return this._doFill=!1,this},constructor:y},p({stroke:"Stroke",fill:"Fill"},function(t,e){var r="_"+e+"Color",n="_do"+t,s="_"+e;y.prototype[e]=function(t,e,i,o){return void 0===t?this[s]():"boolean"!=typeof t?("string"==typeof t||this[r].type!==this.settings.color.prototype.type?this[r]=new this.settings.color(t,e,i,o):this[r].set(t,e,i,o),this[n]=!0):this[n]=t,this}},void 0,!0,["stroke","fill"]),e.exports=y},{"./CompoundedImage":2,"./Image":4,"./_copyDrawingSettings":12,"./_createPolygon":13,"./_getContextNameGL":16,"./_optional":17,"./_polygons":18,"./_setDefaultDrawingSettings":19,"./constants":28,"./options":36}],6:[function(t,e,i){"use strict";var o,r=t("./_optional")("peako/defaults",["peako","defaults"]),n=t("./rendererOptions"),s=t("./constants"),a=t("./Renderer"),f=t("./_align");function h(t){t=r(n,t),a.call(this,t,s.MODE_2D),this.smooth(this.settings.smooth),this.matrix=this.context,this._beginPath=!1}(h.prototype=Object.create(a.prototype)).smooth=(o=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled","oImageSmoothingEnabled","imageSmoothingEnabled"],function(t){var e;if("boolean"!=typeof t)throw TypeError("First argument in smooth( bool ) must be a boolean");for(e=o.length-1;0<=e;--e)o[e]in this.context&&(this.context[o[e]]=t);return this.settings.smooth=t,this}),h.prototype.backgroundColor=function(t,e,i,o){var r=this.context;return r.save(),r.setTransform(this.settings.scale,0,0,this.settings.scale,0,0),r.fillStyle=new this.settings.color(t,e,i,o),r.fillRect(0,0,this.w,this.h),r.restore(),this},h.prototype.backgroundImage=function(t){var e=this._rectAlignX,i=this._rectAlignY;return this._rectAlignX="left",this._rectAlignY="top",this.image(Image.stretch(t,this.w,this.h),0,0),this._rectAlignX=e,this._rectAlignY=i,this},h.prototype.clear=function(t,e,i,o){return void 0===t?(t=e=0,i=this.w,o=this.h):(t=Math.floor(f(t,i,this._rectAlignX)),e=Math.floor(f(e,o,this._rectAlignY))),this.context.clearRect(t,e,i,o),this},h.prototype.vertices=function(t,e,i,o,r){var n,s=this.context;if(e<2)return this;for(null==o&&(o=r=1),s.beginPath(),s.moveTo(t[0]*o,t[1]*r),e*=n=2;n<e;n+=2)s.lineTo(t[n]*o,t[n+1]*r);return this._doFill&&this._fill(),this._doStroke&&0<this._lineWidth&&this._stroke(!0),this},h.prototype._fill=function(){this.context.fillStyle=this._fillColor,this.context.fill()},h.prototype._stroke=function(t){var e=this.context;t&&e.closePath(),e.strokeStyle=this._strokeColor,(e.lineWidth=this._lineWidth)<=1&&e.stroke(),e.stroke()},h.prototype.constructor=h,e.exports=h},{"./Renderer":5,"./_align":11,"./_optional":17,"./constants":28,"./rendererOptions":38}],7:[function(t,e,i){"use strict";var o=t("./_optional")("peako/defaults",["peako","defaults"]),r=t("./ShaderProgram"),n=t("./Transform"),s=t("./constants"),a=t("./Renderer"),f=t("./defaultShaders"),h=t("./rendererOptions");function c(t){t=o(h,t),a.call(this,t,s.MODE_GL),this.matrix=new n,this.buffers={default:this.context.createBuffer(),rect:this.context.createBuffer()},this.shaders={basic:new r(f.basicVert,f.basicFrag,this.context)},this.blending(t.blending)}(c.prototype=Object.create(a.prototype)).resize=function(t,e){return a.prototype.resize.call(this,t,e),this.context.viewport(0,0,this.w,this.h),this},c.prototype.blending=function(t){var e=this.context;return t?(e.enable(e.BLEND),e.disable(e.DEPTH_TEST),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.blendEquation(e.FUNC_ADD)):(e.disable(e.BLEND),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL)),this},c.prototype._clearColor=function(t,e,i,o){var r=this.context;r.clearColor(t,e,i,o),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},c.prototype.backgroundColor=function(t,e,i,o){var r=new this.settings.color(t,e,i,o).rgba();return this._clearColor(r[0]/255,r[1]/255,r[2]/255,r[3]),this},c.prototype.clear=function(){return this._clearColor(0,0,0,0),this},c.prototype.vertices=function(t,e,i,o,r){var n=this.shaders.basic,s=this.context;return e<2||(t&&(null==i&&(i=s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,this.buffers.default),s.bufferData(s.ARRAY_BUFFER,t,i)),null!=o&&this.matrix.scale(o,r),n.use().uniform("utransform",this.matrix.matrix).uniform("ures",[this.w,this.h]).pointer("apos",2,s.FLOAT,!1,0,0),this._doFill&&(n.uniform("ucolor",this._fillColor.rgba()),s.drawArrays(s.TRIANGLE_FAN,0,e)),this._doStroke&&0<this._lineWidth&&(n.uniform("ucolor",this._strokeColor.rgba()),s.lineWidth(this._lineWidth),s.drawArrays(s.LINE_LOOP,0,e))),this},c.prototype.constructor=c,e.exports=c},{"./Renderer":5,"./ShaderProgram":8,"./Transform":10,"./_optional":17,"./constants":28,"./defaultShaders":29,"./rendererOptions":38}],8:[function(t,e,i){"use strict";var o=t("./_createProgram"),r=t("./_createShader");function n(t,e,i){"string"==typeof t&&(t=r(t,i.VERTEX_SHADER,i)),"string"==typeof e&&(e=r(e,i.FRAGMENT_SHADER,i)),this._program=o(t,e,i),this._gl=i,this.attributes=function(t,e){for(var i,o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES)-1,r={};0<=o;--o)(i=t.getActiveAttrib(e,o)).location=t.getAttribLocation(e,i.name),r[i.name]=i;return r}(i,this._program),this.uniforms=function(t,e){for(var i,o,r,n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS)-1,s={};0<=n;--n)r=t.getActiveUniform(e,n),i={location:t.getUniformLocation(e,r.name),size:r.size,type:r.type},1<r.size&&~(o=r.name.indexOf("[0]"))?i.name=r.name.slice(0,o):i.name=r.name,s[i.name]=i;return s}(i,this._program)}(n.prototype={use:function(){return this._gl.useProgram(this._program),this},pointer:function(t,e,i,o,r,n){var s=this.attributes[t].location,a=this._gl;return a.enableVertexAttribArray(s),a.vertexAttribPointer(s,e,i,o,r,n),this},constructor:n}).uniform=function(t,e){var i=this.uniforms[t],o=this._gl;switch(i.type){case o.BOOL:case o.INT:1<i.size?o.uniform1iv(i.location,e):o.uniform1i(i.location,e);break;case o.FLOAT:1<i.size?o.uniform1fv(i.location,e):o.uniform1f(i.location,e);break;case o.FLOAT_MAT2:o.uniformMatrix2fv(i.location,!1,e);break;case o.FLOAT_MAT3:o.uniformMatrix3fv(i.location,!1,e);break;case o.FLOAT_MAT4:o.uniformMatrix4fv(i.location,!1,e);break;case o.FLOAT_VEC2:1<i.size?o.uniform2fv(i.location,e):o.uniform2f(i.location,e[0],e[1]);break;case o.FLOAT_VEC3:1<i.size?o.uniform3fv(i.location,e):o.uniform3f(i.location,e[0],e[1],e[2]);break;case o.FLOAT_VEC4:1<i.size?o.uniform4fv(i.location,e):o.uniform4f(i.location,e[0],e[1],e[2],e[3]);break;default:throw TypeError("The uniform type is not supported")}return this},e.exports=n},{"./_createProgram":14,"./_createShader":15}],9:[function(t,e,i){"use strict";var o=t("./_optional"),n=t("./constants"),s=o("peako/timestamp",["peako","timestamp"]),a=o("peako/timer",["peako","timer"]),f=o("peako/noop",["peako","noop"]);function r(t,e,o){var r=this;"function"!=typeof e&&(o=e,e=null),o===n.SELF_CONTEXT&&(o=this),null==e&&(e=t,t=f),this.lastRequestAnimationFrameID=0,this.lastRequestTime=0,this.skippedTime=0,this.totalTime=0,this.running=!1,this.update=t,this.render=e,this.tick=function t(e){var i;if(!r.running)return e||(r.lastRequestAnimationFrameID=a.request(t),r.lastRequestTime=s(),r.running=!0),this;for(e||(e=s()),i=Math.min(1,.001*(e-r.lastRequestTime)),r.skippedTime+=i,r.totalTime+=i;r.skippedTime>=r.step&&r.running;)r.skippedTime-=r.step,void 0!==o?r.update.call(o,r.step,e):r.update(r.step,e);return void 0!==o?r.render.call(o,i,e):r.render(i,e),r.lastRequestTime=e,r.lastRequestAnimationFrameID=a.request(t),this},this.setFPS(60)}r.prototype={setFPS:function(t){return this.step=1/t,this},clear:function(){return this.skippedTime=0,this},stop:function(){return this.running=!1,this},constructor:r},e.exports=r},{"./_optional":17,"./constants":28}],10:[function(t,e,i){"use strict";var s=t("./mat3");function o(){this.matrix=s.identity(),this._index=-1,this._stack=[]}o.prototype={save:function(){++this._index<this._stack.length?s.copy(this._stack[this._index],this.matrix):this._stack.push(s.clone(this.matrix))},restore:function(){0<=this._index?s.copy(this.matrix,this._stack[this._index--]):s.setIdentity(this.matrix)},setTransform:function(t,e,i,o,r,n){s.setTransform(this.matrix,t,e,i,o,r,n)},translate:function(t,e){s.translate(this.matrix,t,e)},rotate:function(t){s.rotate(this.matrix,t)},scale:function(t,e){s.scale(this.matrix,t,e)},transform:function(t,e,i,o,r,n){s.transform(this.matrix,t,e,i,o,r,n)},constructor:o},e.exports=o},{"./mat3":31}],11:[function(t,e,i){"use strict";var o=t("./constants");e.exports=function(t,e,i){switch(i){case o.LEFT:case o.TOP:return t;case o.CENTER:case o.MIDDLE:return t-.5*e;case o.RIGHT:case o.BOTTOM:return t-e}return 0}},{"./constants":28}],12:[function(t,e,i){"use strict";e.exports=function(t,e,i){return i&&(t._fillColor[0]=e._fillColor[0],t._fillColor[1]=e._fillColor[1],t._fillColor[2]=e._fillColor[2],t._fillColor[3]=e._fillColor[3],t._font.style=e._font.style,t._font.variant=e._font.variant,t._font.weight=e._font.weight,t._font.size=e._font.size,t._font.family=e._font.family,t._strokeColor[0]=e._strokeColor[0],t._strokeColor[1]=e._strokeColor[1],t._strokeColor[2]=e._strokeColor[2],t._strokeColor[3]=e._strokeColor[3]),t._rectAlignX=e._rectAlignX,t._rectAlignY=e._rectAlignY,t._doFill=e._doFill,t._doStroke=e._doStroke,t._lineHeight=e._lineHeight,t._lineWidth=e._lineWidth,t._textAlign=e._textAlign,t._textBaseline=e._textBaseline,t}},{}],13:[function(t,e,i){"use strict";e.exports=function(t){for(var e=Math.floor(t),i=new Float32Array(2*e+2),o=2*Math.PI/t;0<=e;--e)i[2*e]=Math.cos(o*e),i[1+2*e]=Math.sin(o*e);return i}},{}],14:[function(t,e,i){"use strict";e.exports=function(t,e,i){var o=i.createProgram();if(i.attachShader(o,t),i.attachShader(o,e),i.linkProgram(o),!i.getProgramParameter(o,i.LINK_STATUS))throw Error("Unable to initialize the shader program: "+i.getProgramInfoLog(o));if(i.validateProgram(o),!i.getProgramParameter(o,i.VALIDATE_STATUS))throw Error("Unable to validate the shader program: "+i.getProgramInfoLog(o));return o}},{}],15:[function(t,e,i){"use strict";e.exports=function(t,e,i){var o=i.createShader(e);if(i.shaderSource(o,t),i.compileShader(o),!i.getShaderParameter(o,i.COMPILE_STATUS))throw SyntaxError("An error occurred compiling the shaders: "+i.getShaderInfoLog(o));return o}},{}],16:[function(t,e,i){"use strict";var o=t("./_optional")("peako/once",["peako","once"])(function(){var t,e,i=document.createElement("canvas");if("function"==typeof i.getContext)for(e=(t=["webkit-3d","moz-webgl","experimental-webgl","webgl"]).length-1;0<=e;--e)if(i.getContext(t[e]))return t[e]});e.exports=o},{"./_optional":17}],17:[function(t,e,i){"use strict";var n=t;e.exports=function(t,e){var i,o,r;try{return n(t)}catch(t){}if(e&&"undefined"!=typeof self){for(i=self,o=0,r=e.length;o<r;++o){if(null==i[e[o]])return;i=i[e[o]]}return i}}},{}],18:[function(t,e,i){},{}],19:[function(t,e,i){"use strict";var o=t("./_copyDrawingSettings"),r=t("./constants"),n=t("./Font"),s={_rectAlignX:r.LEFT,_rectAlignY:r.TOP,_textAlignX:r.LEFT,_textAlineY:r.TOP,_doStroke:!0,_doFill:!0,_lineH:14,_lineW:2};e.exports=function(t,e){return o(t,s),t._strokeColor=new e.settings.color,t._fillColor=new e.settings.color,t._font=new n,t}},{"./Font":3,"./_copyDrawingSettings":12,"./constants":28}],20:[function(t,e,i){"use strict";var o=t("./Camera");e.exports=function(t,e){return new o(t,e)}},{"./Camera":1}],21:[function(t,e,i){"use strict";var r,h,o=t("../_optional")("peako/clamp",["peako","clamp"]);function n(t,e,i,o){this.set(t,e,i,o)}function c(t,e,i){return t<1/6?Math.round(255*(e+6*(i-e)*t)):t<.5?Math.round(255*i):t<2/3?Math.round(255*(e+(i-e)*(2/3-t)*6)):Math.round(255*e)}n.prototype={perceivedBrightness:function(){return this.rgba().perceivedBrightness()},luminance:function(){return this.rgba().luminance()},brightness:function(){return this.rgba().brightness()},toString:function(){return"hsla("+this[0]+", "+this[1]+"%, "+this[2]+"%, "+this[3]+")"},set:function(t,e,i,o){switch(!0){case"string"==typeof t:t=r(t);case"object"==typeof t&&null!=t:t.type!==this.type&&(t=t[this.type]()),this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3];break;default:switch(void 0){case t:o=1,i=e=t=0;break;case e:o=1,i=Math.floor(t),e=t=0;break;case i:o=e,i=Math.floor(t),e=t=0;break;case o:o=1;default:t=Math.floor(t),e=Math.floor(e),i=Math.floor(i)}this[0]=t,this[1]=e,this[2]=i,this[3]=o}return this},rgba:function(){var t,e=new h,i=this[0]%360/360,o=.01*this[1],r=.01*this[2],n=i+1/3,s=i,a=i-1/3,f=2*r-(t=r<.5?r*(1+o):r+o-r*o);return n<0&&++n,s<0&&++s,a<0&&++a,1<n&&--n,1<s&&--s,1<a&&--a,e[0]=c(n,f,t),e[1]=c(s,f,t),e[2]=c(a,f,t),e[3]=this[3],e},lerp:function(t,e,i,o){var r=new n;return r[0]=t,r[1]=e,r[2]=i,this.lerpColor(r,o)},lerpColor:function(t,e){return this.rgba().lerpColor(t,e).hsla()},shade:function(t){var e=new n;return e[0]=this[0],e[1]=this[1],e[2]=o(this[2]+t,0,100),e[3]=this[3],e},constructor:n,type:"hsla"},e.exports=n,r=t("./_parseColor"),h=t("./RGBA")},{"../_optional":17,"./RGBA":22,"./_parseColor":23}],22:[function(t,e,i){"use strict";var n,c;function s(t,e,i,o){this.set(t,e,i,o)}s.prototype={perceivedBrightness:function(){var t=this[0],e=this[1],i=this[2];return Math.sqrt(.299*t*t+.587*e*e+.114*i*i)},luminance:function(){return.2126*this[0]+.7152*this[1]+.0722*this[2]},brightness:function(){return.299*this[0]+.587*this[1]+.114*this[2]},toString:function(){return"rgba("+this[0]+", "+this[1]+", "+this[2]+", "+this[3]+")"},set:function(t,e,i,o){switch(!0){case"string"==typeof t:t=n(t);case"object"==typeof t&&null!=t:t.type!==this.type&&(t=t[this.type]()),this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3];break;default:switch(void 0){case t:o=1,i=e=t=0;break;case e:o=1,i=e=t=Math.floor(t);break;case i:o=e,i=e=t=Math.floor(t);break;case o:o=1;default:t=Math.floor(t),e=Math.floor(e),i=Math.floor(i)}this[0]=t,this[1]=e,this[2]=i,this[3]=o}return this},hsla:function(){var t,e,i=new c,o=this[0]/255,r=this[1]/255,n=this[2]/255,s=Math.max(o,r,n),a=Math.min(o,r,n),f=50*(s+a),h=s-a;if(h){switch(e=50<f?h/(2-s-a):h/(s+a),s){case o:t=r<n?1.0472*(r-n)/h+6.2832:1.0472*(r-n)/h;break;case r:t=1.0472*(n-o)/h+2.0944;break;default:t=1.0472*(o-r)/h+4.1888}t=Math.round(360*t/6.2832),e=Math.round(100*e)}else t=e=0;return i[0]=t,i[1]=e,i[2]=Math.round(f),i[3]=this[3],i},rgba:function(){return this},lerp:function t(e,i,o,r){return new s(e=t(this[0],e,r),i=t(this[0],i,r),o=t(this[0],o,r),this[3])},lerpColor:function(t,e){var i,o,r;return"object"!=typeof t&&(t=n(t)),"rgba"!==t.type&&(t=t.rgba()),i=t[0],o=t[1],r=t[2],this.lerp(i,o,r,e)},shade:function(t){return this.hsla().shade(t).rgba()},constructor:s,type:"rgba"},e.exports=s,n=t("./_parseColor"),c=t("./HSLA")},{"./HSLA":21,"./_parseColor":23}],23:[function(t,e,i){"use strict";var o,r,n=t("../_optional"),s=t("./colors"),a=n("peako/create",["peako","create"]),f=n("peako/trim",["peako","trim"]),h=a(null),c=[0,0,0,0],u={hex3:/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/,hex:/^#([0-9a-f]{6})([0-9a-f]{2})?$/,rgb:/^rgb\s*\(\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\s*\)$|^\s*rgba\s*\(\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\s*\)$/,hsl:/^hsl\s*\(\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\u0025\s*,\s*(\d+|\d*\.\d+)\u0025\s*\)$|^\s*hsla\s*\(\s*(\d+|\d*\.\d+)\s*,\s*(\d+|\d*\.\d+)\u0025\s*,\s*(\d+|\d*\.\d+)\u0025\s*,\s*(\d+|\d*\.\d+)\s*\)$/};function l(t,e){var i,o,r,n;return e?(i=t[1])+i+(o=t[2])+o+(r=t[3])+r+(n=t[4]||"f")+n:t[1]+(t[2]||"ff")}function d(t){return 0==t?c:[(t=parseInt(t,16))>>24&255,t>>16&255,t>>8&255,(255&t)/255]}function m(t){return t[7]?[+t[4],+t[5],+t[6],+t[7]]:[+t[1],+t[2],+t[3]]}function p(t,e){this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.color=e}e.exports=function(t){var e=h[t]||h[t=f(t).toLowerCase()];if(!e){if(e=s[t])e=new p(d(e),o);else if(e=u.hex.exec(t))e=new p(d(l(e)),o);else if(e=u.rgb.exec(t))e=new p(m(e),o);else if(e=u.hsl.exec(t))e=new p(m(e),r);else{if(!(e=u.hex3.exec(t)))throw SyntaxError(t+" is not a valid syntax");e=new p(d(l(e,!0)),o)}h[t]=e}return new e.color(e[0],e[1],e[2],e[3])},o=t("./RGBA"),r=t("./HSLA")},{"../_optional":17,"./HSLA":21,"./RGBA":22,"./colors":25}],24:[function(t,e,i){"use strict";var r=t("./_parseColor"),n=t("./RGBA");e.exports=function(t,e,i,o){return"string"!=typeof t?new n(t,e,i,o):r(t)}},{"./RGBA":22,"./_parseColor":23}],25:[function(t,e,i){"use strict";e.exports={aliceblue:"f0f8ffff",antiquewhite:"faebd7ff",aqua:"00ffffff",aquamarine:"7fffd4ff",azure:"f0ffffff",beige:"f5f5dcff",bisque:"ffe4c4ff",black:"000000ff",blanchedalmond:"ffebcdff",blue:"0000ffff",blueviolet:"8a2be2ff",brown:"a52a2aff",burlywood:"deb887ff",cadetblue:"5f9ea0ff",chartreuse:"7fff00ff",chocolate:"d2691eff",coral:"ff7f50ff",cornflowerblue:"6495edff",cornsilk:"fff8dcff",crimson:"dc143cff",cyan:"00ffffff",darkblue:"00008bff",darkcyan:"008b8bff",darkgoldenrod:"b8860bff",darkgray:"a9a9a9ff",darkgreen:"006400ff",darkkhaki:"bdb76bff",darkmagenta:"8b008bff",darkolivegreen:"556b2fff",darkorange:"ff8c00ff",darkorchid:"9932ccff",darkred:"8b0000ff",darksalmon:"e9967aff",darkseagreen:"8fbc8fff",darkslateblue:"483d8bff",darkslategray:"2f4f4fff",darkturquoise:"00ced1ff",darkviolet:"9400d3ff",deeppink:"ff1493ff",deepskyblue:"00bfffff",dimgray:"696969ff",dodgerblue:"1e90ffff",feldspar:"d19275ff",firebrick:"b22222ff",floralwhite:"fffaf0ff",forestgreen:"228b22ff",fuchsia:"ff00ffff",gainsboro:"dcdcdcff",ghostwhite:"f8f8ffff",gold:"ffd700ff",goldenrod:"daa520ff",gray:"808080ff",green:"008000ff",greenyellow:"adff2fff",honeydew:"f0fff0ff",hotpink:"ff69b4ff",indianred:"cd5c5cff",indigo:"4b0082ff",ivory:"fffff0ff",khaki:"f0e68cff",lavender:"e6e6faff",lavenderblush:"fff0f5ff",lawngreen:"7cfc00ff",lemonchiffon:"fffacdff",lightblue:"add8e6ff",lightcoral:"f08080ff",lightcyan:"e0ffffff",lightgoldenrodyellow:"fafad2ff",lightgrey:"d3d3d3ff",lightgreen:"90ee90ff",lightpink:"ffb6c1ff",lightsalmon:"ffa07aff",lightseagreen:"20b2aaff",lightskyblue:"87cefaff",lightslateblue:"8470ffff",lightslategray:"778899ff",lightsteelblue:"b0c4deff",lightyellow:"ffffe0ff",lime:"00ff00ff",limegreen:"32cd32ff",linen:"faf0e6ff",magenta:"ff00ffff",maroon:"800000ff",mediumaquamarine:"66cdaaff",mediumblue:"0000cdff",mediumorchid:"ba55d3ff",mediumpurple:"9370d8ff",mediumseagreen:"3cb371ff",mediumslateblue:"7b68eeff",mediumspringgreen:"00fa9aff",mediumturquoise:"48d1ccff",mediumvioletred:"c71585ff",midnightblue:"191970ff",mintcream:"f5fffaff",mistyrose:"ffe4e1ff",moccasin:"ffe4b5ff",navajowhite:"ffdeadff",navy:"000080ff",oldlace:"fdf5e6ff",olive:"808000ff",olivedrab:"6b8e23ff",orange:"ffa500ff",orangered:"ff4500ff",orchid:"da70d6ff",palegoldenrod:"eee8aaff",palegreen:"98fb98ff",paleturquoise:"afeeeeff",palevioletred:"d87093ff",papayawhip:"ffefd5ff",peachpuff:"ffdab9ff",peru:"cd853fff",pink:"ffc0cbff",plum:"dda0ddff",powderblue:"b0e0e6ff",purple:"800080ff",red:"ff0000ff",rosybrown:"bc8f8fff",royalblue:"4169e1ff",saddlebrown:"8b4513ff",salmon:"fa8072ff",sandybrown:"f4a460ff",seagreen:"2e8b57ff",seashell:"fff5eeff",sienna:"a0522dff",silver:"c0c0c0ff",skyblue:"87ceebff",slateblue:"6a5acdff",slategray:"708090ff",snow:"fffafaff",springgreen:"00ff7fff",steelblue:"4682b4ff",tan:"d2b48cff",teal:"008080ff",thistle:"d8bfd8ff",tomato:"ff6347ff",turquoise:"40e0d0ff",violet:"ee82eeff",violetred:"d02090ff",wheat:"f5deb3ff",white:"ffffffff",whitesmoke:"f5f5f5ff",yellow:"ffff00ff",yellowgreen:"9acd32ff",transparent:"00000000"}},{}],26:[function(t,e,i){"use strict";var r=t("./HSLA");e.exports=function(t,e,i,o){return new r(t,e,i,o)}},{"./HSLA":21}],27:[function(t,e,i){"use strict";var r=t("./RGBA");e.exports=function(t,e,i,o){return new r(t,e,i,o)}},{"./RGBA":22}],28:[function(t,e,i){"use strict";e.exports={MODE_AUTO:1,MODE_GL:2,MODE_2D:3,SELF_CONTEXT:6,BOTTOM:7,RIGHT:8,LEFT:9,TOP:10,CENTER:11,MIDDLE:12}},{}],29:[function(t,e,i){"use strict";e.exports={basicVert:"precision mediump float;attribute vec2 apos;uniform vec2 ures;uniform mat3 utransform;void main(){gl_Position=vec4(((utransform*vec3(apos,1.0)).xy/ures*2.0-1.0)*vec2(1,-1),0,1);}",basicFrag:"precision mediump float;uniform vec4 ucolor;void main(){gl_FragColor=vec4(ucolor.rgb/255.0,ucolor.a);}",backgroundVert:"precision mediump float;attribute vec2 apos;void main(){gl_Position = vec4(apos,0,1);}",backgroundFrag:"precision mediump float;uniform vec4 ucolor;void main(){gl_FragColor=ucolor;}"}},{}],30:[function(t,e,i){"use strict";var o=t("./Image");e.exports=function(t){return new o(t)}},{"./Image":4}],31:[function(t,e,i){"use strict";i.identity=function(){return[1,0,0,0,1,0,0,0,1]},i.setIdentity=function(t){t[0]=t[4]=t[8]=1,t[1]=t[2]=t[3]=t[5]=t[6]=t[7]=0},i.copy=function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]},i.clone=function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},i.translate=function(t,e,i){t[6]=e*t[0]+i*t[3]+t[6],t[7]=e*t[1]+i*t[4]+t[7],t[8]=e*t[2]+i*t[5]+t[8]},i.rotate=function(t,e){var i=t[0],o=t[1],r=t[2],n=t[3],s=t[4],a=t[5],f=Math.cos(e),h=Math.sin(e);t[0]=f*i+h*n,t[1]=f*o+h*s,t[2]=f*r+h*a,t[3]=f*n-h*i,t[4]=f*s-h*o,t[5]=f*a-h*r},i.scale=function(t,e,i){t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=i,t[4]*=i,t[5]*=i},i.transform=function(t,e,i,o,r,n,s){t[0]*=e,t[1]*=o,t[2]*=n,t[3]*=i,t[4]*=r,t[5]*=s,t[6]=0,t[7]=0},i.setTransform=function(t,e,i,o,r,n,s){t[0]=e,t[1]=i,t[3]=o,t[4]=r,t[6]=n,t[7]=s}},{}],32:[function(t,e,i){"use strict";var n=t("../options");function o(t,e){this.set(t,e)}o.prototype={set:function(t,e){return this.x=t||0,this.y=e||0,this},setVector:function(t){return this.set(t.x,t.y)},lerp:function(t,e,i){return this.x+=(t-this.x)*i||0,this.y+=(e-this.y)*i||0,this},lerpVector:function(t,e){var i=t.x||0,o=t.y||0;return this.lerp(i,o,e)},add:function(t,e){return this.x+=t||0,this.y+=e||0,this},addVector:function(t){return this.add(t.x,t.y)},sub:function(t,e){return this.x-=t||0,this.y-=e||0,this},subVector:function(t){return this.sub(t.x,t.y)},mul:function(t){return this.x*=t||0,this.y*=t||0,this},mulVector:function(t){return this.x*=t.x||0,this.y*=t.y||0,this},div:function(t){return this.x/=t||0,this.y/=t||0,this},divVector:function(t){return this.x/=t.x||0,this.y/=t.y||0,this},angle:function(){return n.degrees?180*Math.atan2(this.y,this.x)/Math.PI:Math.atan2(this.y,this.x)},mag:function(){return Math.sqrt(this.magSquare())},magSquare:function(){return this.x*this.x+this.y*this.y},setMag:function(t){return this.normalize().mult(t)},normalize:function(){var t=this.mag();return t&&1!==t&&this.div(t),this},dot:function(t,e){return this.x*(t||0)+this.y*(e||0)},dotVector:function(t){return this.x*(t.x||0)+this.y*(t.y||0)},clone:function(){return new o(this.x,this.y)},dist:function t(e){return t(this.x,this.y,e.x,e.y)},limit:function(t){var e=this.magSquare();return t*t<e&&this.div(Math.sqrt(e)).mult(t),this},cross:function(t){return o.cross(this,t)},toString:function(){return"vec2("+this.x.toFixed(2)+", "+this.y.toFixed(2)+")"},rotate:function(t){var e,i,o=this.x,r=this.y;return n.degrees&&(t*=Math.PI/180),e=Math.cos(t),i=Math.sin(t),this.x=o*e-r*i,this.y=o*i+r*e,this},setAngle:function(t){var e=this.mag();return n.degrees&&(t*=Math.PI/180),this.x=e*Math.cos(t),this.y=e*Math.sin(t),this},constructor:o},["normalize","setMag","rotate","limit","lerp","mul","div","add","sub","set"].forEach(function(t){o[t]=Function("vector, x, y, z, value","return vector.copy()."+t+"( x, y, z, value );")}),o.random=function(){var t;return t=n.degrees?360:2*Math.PI,o.fromAngle(Math.random()*t)},o.fromAngle=function(t){return n.degrees&&(t*=Math.PI/180),new o(Math.cos(t),Math.sin(t))},o.cross=function(t,e){return t.x*e.y-t.y*e.x},e.exports=o},{"../options":36}],33:[function(t,e,i){"use strict";var o=t("./Vector2D"),r=t("../options");function n(t,e,i){this.set(t,e,i)}n.prototype={set:function(t,e,i){return this.x=t||0,this.y=e||0,this.z=i||0,this},setVector:function(t){return this.set(t.x,t.y,t.z)},lerp:function(t,e,i,o){return this.x+=(t-this.x)*o||0,this.y+=(e-this.y)*o||0,this.z+=(i-this.z)*o||0,this},lerpVector:function(t,e){var i=t.x||0,o=t.y||0,r=t.z||0;return this.lerp(i,o,r,e)},add:function(t,e,i){return this.x+=t||0,this.y+=e||0,this.z+=i||0,this},addVector:function(t){return this.add(t.x,t.y,t.z)},sub:function(t,e,i){return this.x-=t||0,this.y-=e||0,this.z-=i||0,this},subVector:function(t){return this.sub(t.x,t.y,t.z)},mul:function(t){return this.x*=t||0,this.y*=t||0,this.z*=t||0,this},mulVector:function(t){return this.x*=t.x||0,this.y*=t.y||0,this.z*=t.z||0,this},div:function(t){return this.x/=t||0,this.y/=t||0,this.z/=t||0,this},divVector:function(t){return this.x/=t.x||0,this.y/=t.y||0,this.z/=t.z||0,this},magSquare:function(){return this.x*this.x+this.y*this.y+this.z*this.z},dot:function(t,e,i){return this.x*t+this.y*e+this.z*i},dotVector:function(t){var e=t.x||0,i=t.y||0,o=t.z||0;return this.dot(e,i,o)},copy:function(){return new n(this.x,this.y,this.z)},dist:function(t){var e=t.x-this.x,i=t.y-this.y,o=t.z-this.z;return Math.sqrt(e*e+i*i+o*o)},toString:function(){return"vec3("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+")"},normalize:o.prototype.normalize,setAngle:o.prototype.setAngle,setMag:o.prototype.setMag,rotate:o.prototype.rotate,angle:o.prototype.angle,limit:o.prototype.limit,mag:o.prototype.mag,constructor:n},["normalize","setMag","rotate","limit","lerp","mul","div","add","sub","set"].forEach(function(t){n[t]=o[t]}),n.random=function(){var t=Math.random()*Math.PI*2,e=2*Math.random()-1,i=Math.root(1-e*e);return new n(i*Math.cos(t),i*Math.sin(t),e)},n.fromAngle=function(t){return r.degrees&&(t*=Math.PI/180),new n(Math.cos(t),Math.sin(t))},e.exports=n},{"../options":36,"./Vector2D":32}],34:[function(t,e,i){"use strict";var o=t("./Vector2D");e.exports=function(t,e){return new o(t,e)}},{"./Vector2D":32}],35:[function(t,e,i){"use strict";var o=t("./Vector3D");e.exports=function(t,e,i){return new o(t,e,i)}},{"./Vector3D":33}],36:[function(t,e,i){"use strict";e.exports={degress:!1}},{}],37:[function(t,e,i){"use strict";var o=t("./_getContextNameGL"),r=t("./_optional"),n=t("./rendererOptions"),s=t("./RendererGL"),a=t("./Renderer2D"),f=t("./constants"),h=t("./report"),c=r("peako/once",["peako","once"]),u=r("platform",["platform"]),l=c(function(){var t,e;return"undefined"!=typeof window&&(t="ontouchstart"in window&&"ontouchmove"in window&&"ontouchend"in window),u&&(e=u.os&&"iOS"===u.os.family&&"Safari"===u.name),t&&!e?f.MODE_GL:f.MODE_2D});e.exports=function(t){var e=t&&t.mode||n.mode;if(e===f.MODE_AUTO&&(e=l()),e===f.MODE_GL){if(o())return new s(t);h("Cannot create WebGL context, fallback to 2D.")}if(e===f.MODE_2D||e===f.MODE_GL)return new a(t)}},{"./Renderer2D":6,"./RendererGL":7,"./_getContextNameGL":16,"./_optional":17,"./constants":28,"./rendererOptions":38,"./report":39}],38:[function(t,e,i){"use strict";e.exports={settings:{color:t("./colors/RGBA"),smooth:!1,scale:1},antialias:!0,blending:!0,degrees:!1,append:!0,alpha:!0,mode:t("./constants").MODE_2D}},{"./colors/RGBA":22,"./constants":28}],39:[function(t,e,i){"use strict";var o,r;"undefined"!=typeof console&&console.warn?(r={},o=function(t){r[t]||(console.warn(t),r[t]=!0)}):o=t("./_optional")("peako/noop",["peako","noop"]),e.exports=o},{"./_optional":17}],40:[function(t,e,i){"use strict";var o=t("./Ticker");e.exports=function(t,e,i){return new o(t,e,i)}},{"./Ticker":9}],41:[function(t,e,i){"use strict";var o={Camera:t("./Camera"),CompoundedImage:t("./CompoundedImage"),HSLA:t("./colors/HSLA"),Image:t("./Image"),RGBA:t("./colors/RGBA"),Renderer2D:t("./Renderer2D"),RendererGL:t("./RendererGL"),ShaderProgram:t("./ShaderProgram"),Ticker:t("./Ticker"),Transform:t("./Transform"),Vector2D:t("./math/Vector2D"),Vector3D:t("./math/Vector3D"),camera:t("./camera"),color:t("./colors/color"),constants:t("./constants"),defaultShaders:t("./defaultShaders"),hsla:t("./colors/hsla"),image:t("./image"),options:t("./options"),renderer:t("./renderer"),rendererOptions:t("./rendererOptions"),rgba:t("./colors/rgba"),ticker:t("./ticker"),vec2:t("./math/vec2"),vec3:t("./math/vec3")};"undefined"!=typeof self&&(self.v6=o),e.exports=o},{"./Camera":1,"./CompoundedImage":2,"./Image":4,"./Renderer2D":6,"./RendererGL":7,"./ShaderProgram":8,"./Ticker":9,"./Transform":10,"./camera":20,"./colors/HSLA":21,"./colors/RGBA":22,"./colors/color":24,"./colors/hsla":26,"./colors/rgba":27,"./constants":28,"./defaultShaders":29,"./image":30,"./math/Vector2D":32,"./math/Vector3D":33,"./math/vec2":34,"./math/vec3":35,"./options":36,"./renderer":37,"./rendererOptions":38,"./ticker":40}]},{},[41]);
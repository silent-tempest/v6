<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Renderer2D.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Renderer2D.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

var defaults         = require( 'peako/defaults' );
var align            = require( './internal/align' );
var AbstractRenderer = require( './AbstractRenderer' );
var constants        = require( './constants' );
var options_         = require( './options' );

/**
 * 2D рендерер.
 * @constructor v6.Renderer2D
 * @extends v6.AbstractRenderer
 * @param {object} options {@link v6.options}
 */
function Renderer2D ( options ) {
  AbstractRenderer.call( this, ( options = defaults( options_, options ) ), constants.get( 'RENDERER_2D' ) );

  /**
   * @alias v6.Renderer2D#context
   */
  this.matrix = this.context;

  /**
   * @private
   * @member {boolean} v6.Renderer2D#_beginPath
   */
  this._beginPath = false;
}

Renderer2D.prototype = Object.create( AbstractRenderer.prototype );
Renderer2D.prototype.constructor = Renderer2D;

/**
 * @override
 * @method v6.Renderer2D#backgroundColor
 */
Renderer2D.prototype.backgroundColor = function backgroundColor ( r, g, b, a ) {

  var settings = this.settings;
  var context  = this.context;

  context.save();
  context.fillStyle = new settings.color( r, g, b, a );
  context.setTransform( settings.scale, 0, 0, settings.scale, 0, 0 );
  context.fillRect( 0, 0, this.w, this.h );
  context.restore();

  return this;

};

/**
 * @override
 * @method v6.Renderer2D#backgroundImage
 */
Renderer2D.prototype.backgroundImage = function backgroundImage ( image ) {

  var _rectAlignX = this._rectAlignX;
  var _rectAlignY = this._rectAlignY;

  this._rectAlignX = constants.get( 'CENTER' );
  this._rectAlignY = constants.get( 'MIDDLE' );

  this.image( image, this.w * 0.5, this.h * 0.5 );

  this._rectAlignX = _rectAlignX;
  this._rectAlignY = _rectAlignY;

  return this;

};

/**
 * @override
 * @method v6.Renderer2D#clear
 */
Renderer2D.prototype.clear = function clear () {
  this.context.clear( 0, 0, this.w, this.h );
  return this;
};

/**
 * @override
 * @method v6.Renderer2D#drawArrays
 */
Renderer2D.prototype.drawArrays = function drawArrays ( verts, count, _mode, _sx, _sy ) {
  var context = this.context;
  var i;

  if ( count &lt; 2 ) {
    return this;
  }

  if ( _sx == null ) {
    _sx = _sy = 1;
  }

  context.beginPath();
  context.moveTo( verts[ 0 ] * _sx, verts[ 1 ] * _sy );

  for ( i = 2, count *= 2; i &lt; count; i += 2 ) {
    context.lineTo( verts[ i ] * _sx, verts[ i + 1 ] * _sy );
  }

  if ( this._doFill ) {
    this._fill();
  }

  if ( this._doStroke &amp;&amp; this._lineWidth > 0 ) {
    this._stroke( true );
  }

  return this;
};

/**
 * @override
 * @method v6.Renderer2D#drawImage
 */
Renderer2D.prototype.drawImage = function drawImage ( image, x, y, w, h ) {
  this.context.drawImage( image.get().image, image.x, image.y, image.w, image.h, x, y, w, h );
};

Renderer2D.prototype.rect = function rect ( x, y, w, h ) {

  x = Math.floor( align( x, w, this._rectAlignX ) );
  y = Math.floor( align( y, h, this._rectAlignY ) );

  if ( this._beginPath ) {
    this.context.rect( x, y, w, h );
  } else {
    this.context.beginPath();
    this.context.rect( x, y, w, h );

    if ( this._doFill ) {
      this._fill();
    }

    if ( this._doStroke ) {
      this._stroke();
    }
  }

  return this;

};

Renderer2D.prototype.arc = function arc ( x, y, r ) {

  if ( this._beginPath ) {
    this.context.arc( x, y, r, 0, Math.PI * 2, false );
  } else {
    this.context.beginPath();
    this.context.arc( x, y, r, 0, Math.PI * 2, false );

    if ( this._doFill ) {
      this._fill();
    }

    if ( this._doStroke ) {
      this._stroke( true );
    }
  }

  return this;

};

// var defaults  = require( 'peako/defaults' );
// var constants = require( './constants' );
// var AbstractRenderer  = require( './AbstractRenderer' );
// var _options  = require( './options' );
// var align     = require( './internal/align' );

// Renderer2D.prototype._fill = function _fill () {
//   this.context.fillStyle = this._fillColor;
//   this.context.fill();
// };

// Renderer2D.prototype._stroke = function ( close ) {
//   var context = this.context;

//   if ( close ) {
//     context.closePath();
//   }

//   context.strokeStyle = this._strokeColor;

//   if ( ( context.lineWidth = this._lineWidth ) &lt;= 1 ) {
//     context.stroke();
//   }

//   context.stroke();
// };

module.exports = Renderer2D;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-_v6.js_.CompoundedImage.html">CompoundedImage</a></li><li><a href="module-_v6.js_.Image.html">Image</a></li><li><a href="v6.AbstractRenderer.html">AbstractRenderer</a></li><li><a href="v6.AbstractVector.html">AbstractVector</a></li><li><a href="v6.Renderer2D.html">Renderer2D</a></li><li><a href="v6.RendererGL.html">RendererGL</a></li><li><a href="v6.ShaderProgram.html">ShaderProgram</a></li><li><a href="v6.Ticker.html">Ticker</a></li><li><a href="v6.Vector2D.html">Vector2D</a></li><li><a href="v6.Vector3D.html">Vector3D</a></li></ul><h3>Namespaces</h3><ul><li><a href="v6.html">v6</a></li></ul><h3>Interfaces</h3><ul><li><a href="IAttribute.html">IAttribute</a></li><li><a href="IShaderSources.html">IShaderSources</a></li><li><a href="IUniform.html">IUniform</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Sep 29 2018 02:03:08 GMT+0700 (+07)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>

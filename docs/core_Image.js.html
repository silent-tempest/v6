<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/Image.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/Image.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

var report          = require( './internal/report' );

var CompoundedImage = require( './CompoundedImage' );

/**
 * @constructor v6.Image
 * @param {string|HTMLImageElement} url
 */
function Image ( url )
{

  var self = this;

  this.loaded = false;

  this.x = 0;
  this.y = 0;

  if ( typeof HTMLImageElement !== 'undefined' &amp;&amp; url instanceof HTMLImageElement ) {
    if ( url.src ) {
      if ( url.complete ) {
        this.onload();
      } else if ( url.addEventListener ) {
        url.addEventListener( 'load', function onload ()
        {
          url.removeEventListener( 'load', onload );
          self.onload();
        } );
      } else {
        report( '`new v6.Image(image: HTMLImageElement)`: do `image.onload()` in your "load" event listener' );
      }

      this.url = url.src;
    } else {
      this.url = '';
    }

    this.image = url;
  } else if ( typeof url === 'string' ) {
    this.image = document.createElement( 'img' );
    this.url   = url;
    this.load();
  } else {
    throw TypeError( '`new v6.Image()`: first argument must be a string or HTMLImageElement object' );
  }

}

Image.prototype = {
  /**
   * @method v6.Image#onload
   * @return {void}
   */
  onload: function onload ( _e )
  {

    if ( _e ) {
      this.image.onload = null;
    }

    this.w = this.dw = this.image.width;  // eslint-disable-line no-multi-assign
    this.h = this.dh = this.image.height; // eslint-disable-line no-multi-assign

    this.loaded = true;

  },

  /**
   * @method v6.Image#load
   * @param {string} [url]
   * @chainable
   * @example
   * var image = new Image( document.createElement( 'img' ) )
   *   .load( './assets/whatrudoing.png' );
   */
  load: function load ( url )
  {
    if ( ! this.loaded ) {

      this.image.onload = this.onload.bind( this );
      this.image.src = this.url = ( this.url || url || '' ); // eslint-disable-line no-multi-assign, no-extra-parens

    }

    return this;
  },

  /**
   * @method v6.Image#get
   * @chainable
   * @see v6.CompoundedImage#get
   */
  get: function get ()
  {
    return this;
  },

  constructor: Image
};

/**
 * @method v6.Image.stretch
 * @param  {v6.Image|v6.CompoundedImage} image
 * @param  {number}                      w
 * @param  {number}                      h
 * @return {v6.CompoundedImage}
 */
Image.stretch = function stretch ( image, w, h )
{

  var x = h / image.h * image.w;

  // Stretch width (keep w, change h).

  if ( x &lt; w ) {
    h = w / image.w * image.h;

  // Stretch height (change w, keep h).

  } else {
    w = x;
  }

  return new CompoundedImage( image.get(), image.x, image.y, image.w, image.h, w, h );

};

/**
 * @method v6.Image.cut
 * @param  {v6.Image|v6.CompoundedImage} image
 * @param  {number}                      x
 * @param  {number}                      y
 * @param  {number}                      dw
 * @param  {number}                      dh
 * @return {v6.CompoundedImage}
 */
Image.cut = function cut ( image, x, y, dw, dh )
{

  var w = image.w / image.dw * dw;
  var h = image.h / image.dh * dh;

  x += image.x;

  if ( x + w > image.x + image.w ) {
    throw Error( 'v6.Image.cut: cannot cut the image because the new image X or W is out of bounds' );
  }

  y += image.y;

  if ( y + h > image.y + image.h ) {
    throw Error( 'v6.Image.cut: cannot cut the image because the new image Y or H is out of bounds' );
  }

  return new CompoundedImage( image.get(), x, y, w, h, dw, dh );

};

module.exports = Image;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="v6.AbstractRenderer.html">AbstractRenderer</a></li><li><a href="v6.AbstractVector.html">AbstractVector</a></li><li><a href="v6.CompoundedImage.html">CompoundedImage</a></li><li><a href="v6.Image.html">Image</a></li><li><a href="v6.Renderer2D.html">Renderer2D</a></li><li><a href="v6.RendererGL.html">RendererGL</a></li><li><a href="v6.ShaderProgram.html">ShaderProgram</a></li><li><a href="v6.Ticker.html">Ticker</a></li><li><a href="v6.Vector2D.html">Vector2D</a></li><li><a href="v6.Vector3D.html">Vector3D</a></li></ul><h3>Namespaces</h3><ul><li><a href="v6.html">v6</a></li></ul><h3>Interfaces</h3><ul><li><a href="IAttribute.html">IAttribute</a></li><li><a href="IShaderSources.html">IShaderSources</a></li><li><a href="IUniform.html">IUniform</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Sep 30 2018 19:11:22 GMT+0700 (+07)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
